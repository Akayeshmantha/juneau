<!DOCTYPE HTML>
<html>
<head>
	<style type='text/css'>
		@import '$R{servletURI}/style.css';
	</style>
	<script>
		// Quick and dirty function to allow tabs in textarea.
		function checkTab(e) {
		    if (e.keyCode == 9) {
			    var t = e.target;
			    var ss = t.selectionStart, se = t.selectionEnd;
	            t.value = t.value.slice(0,ss).concat('\t').concat(t.value.slice(ss,t.value.length));
		        e.preventDefault();
		    }
		}	
		// Load results from IFrame into this document.
		function loadResults(b) {
			var doc = b.contentDocument || b.contentWindow.document;
			var data = doc.getElementById('data') || doc.getElementsByTagName('body')[0];
			document.getElementById('results').innerHTML = data.innerHTML;
		}
	</script>
</head>
<body>
	<h3 class='title'>SQL Query API</h3>
	<div class='data'>
		<form action='sqlQuery' method='POST' target='buf'>
			<table>
				<tr>
					<th>Position (1-10000):</th>
					<td><input name='pos' type='number' value='1'></td>
					<th>Limit (1-10000):</th>
					<td><input name='limit' type='number' value='100'></td>
					<td><button type='submit'>Submit</button><button type='reset'>Reset</button></td>
				</tr>
				<tr>
					<td colspan="5">
						<textarea name='sql' style='width:100%;height:200px;font-family:Courier;font-size:9pt;' onkeydown='checkTab(event)'></textarea>
					</td>	
				</tr>
			</table>			 
		</form>
		<br>
		<div id='results'>
		</div>
	</div>
	<iframe name='buf' style='display:none' onload="parent.loadResults(this)"></iframe>
</body>
</html>

