<!DOCTYPE HTML>
<!--
    Licensed Materials - Property of IBM
    (c) Copyright IBM Corporation 2014. All Rights Reserved.
   
    Note to U.S. Government Users Restricted Rights:  
    Use, duplication or disclosure restricted by GSA ADP Schedule 
    Contract with IBM Corp. 
 -->
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		/* For viewing in Page Designer */
		@IMPORT url("../../../../../../javadoc.css");

		/* For viewing in REST interface */
		@IMPORT url("../htdocs/javadoc.css");
		body { 
			margin: 20px; 
		}	
	</style>
	<script>
		/* Replace all @code and @link tags. */	
		window.onload = function() {
			document.body.innerHTML = document.body.innerHTML.replace(/\{\@code ([^\}]+)\}/g, '<code>$1</code>');
			document.body.innerHTML = document.body.innerHTML.replace(/\{\@link (([^\}]+)\.)?([^\.\}]+)\}/g, '<code>$3</code>');
		}
	</script>
</head>
<body>
<p>Parser API</p>

<script>
	function toggle(x) {
		var div = x.nextSibling;
		while (div != null && div.nodeType != 1)
			div = div.nextSibling;
		if (div != null) {
			var d = div.style.display;
			if (d == 'block' || d == '') {
				div.style.display = 'none';
				x.className += " closed";
			} else {
				div.style.display = 'block';
				x.className = x.className.replace(/(?:^|\s)closed(?!\S)/g , '' );
			}
		}
	}
</script>

<a id='TOC'></a><h5 class='toc'>Table of Contents</h5>
<ol class='toc'>
	<li><p><a class='doclink' href='#Parser'>Parser API</a></p>
	<ol>
		<li><p><a class='doclink' href='#ParserGroup'>The ParserGroup class</a></p>
	</ol>
	<li><p><a class='doclink' href='#DefiningParser'>Defining a new Parser</a></p>
</ol>

<!-- ======================================================================================================== -->
<a id="Parser"></a>
<h2 class='topic' onclick='toggle(this)'>1 - Parser API</h2>
<div class='topic'>
	<p>
		The parser API is designed to be easily extensible by developers. <br>
		If you are writing your own parser, you will typically subclass directly from either {@link com.ibm.juno.core.parser.ReaderParser}
			or {@link com.ibm.juno.core.parser.InputStreamParser}.<br>
	</p>

	<!-- ======================================================================================================== -->
	<a id="ParserGroup"></a>
	<h3 class='topic' onclick='toggle(this)'>1.1 - The ParserGroup class</h3>
	<div class='topic'>
		<p>
			The {@link com.ibm.juno.core.parser.ParserGroup} class represents a group of parser registered with the media types they handle.
		</p>
		
		<h6 class='topic'>Features</h6>		
		<p>
			The <code>ParserGroup</code> class provides the following features:
		<ul>
			<li>Finds parsers based on HTTP <code>Content-Type</code> header values.
			<li>Sets common properties on all parsers in a single method call.
			<li>Locks all parsers in a single method call.
			<li>Clones existing groups and all parsers within the group in a single method call.
		</ul>
		
		<p>
			Refer to {@link com.ibm.juno.core.parser.ParserGroup} for additional information.
		</p>
	</div> 
</div>


<!-- ======================================================================================================== -->
<a id="DefiningParser"></a>
<h2 class='topic' onclick='toggle(this)'>2 - Defining a new Parser</h2>
<div class='topic'>
	<p>
		Defining a new parser is quite simple if you subclass directly from {@link com.ibm.juno.core.parser.ReaderParser} 
			or {@link com.ibm.juno.core.parser.InputStreamParser}.  In each case, you simply need to implement a single
			method and specify a {@link com.ibm.juno.core.annotation.Consumes} annotation.
	</p>
	<p>
		The following example shows a simple parser that converts input streams to images using standard JRE classes.
	</p>
	<p class='bcode'>
	<ja>@Consumes</ja>({<js>"image/png"</js>,<js>"image/jpeg"</js>})
	<jk>public static class</jk> ImageParser <jk>extends</jk> InputStreamParser {
		<ja>@Override</ja>
		<jk>public</jk> &lt;T&gt; T parse(InputStream in, ClassMeta&lt;T&gt; type, ParserContext ctx) <jk>throws</jk> ParseException, IOException {
			BufferedImage image = ImageIO.<jsm>read</jsm>(in);
			<jk>return</jk> (T)image;
		}
	}
	</p>
	<p>
		Parsers that take advantage of the entire {@link com.ibm.juno.core.CoreApi} interface to be able to parse arbitrary beans and POJOs is
			considerably more complex and outside the scope of this document.  
		If developing such a parser, the best course of action would be to replicate what occurs in the {@link com.ibm.juno.core.json.JsonParser} class.
	</p>
</div>

</body>
</html>